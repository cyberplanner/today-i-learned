{"version":3,"sources":["webpack:///webpack/bootstrap 5882869cd152497720f7","webpack:///./js/components/new-learn-form.js","webpack:///./js/firebase-config.js","webpack:///./sass/style.scss","webpack:///./js/index.js"],"names":["db","firebase","database","newLearnForm","Vue","component","data","cleanNewLearnText","newLearnText","trim","updatedStatus","status","methods","randomLearn","learns","randomIndex","Math","floor","random","length","saveNewLearn","ref","userUid","push","createdAt","Date","now","learnText","updatedAt","error","placeholder","props","template","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","require","initializeApp","provider","auth","TwitterAuthProvider","App","beforeCreate","onAuthStateChanged","user","console","log","$bindAsArray","uid","document","querySelector","classList","add","bind","el","learnsList","removeLearn","learn","event","$firebaseRefs","child","remove","preventDefault","signIn","signInWithPopup","then","result","update","displayName","catch","errorMessage","message","signOut"],"mappings":"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","file":"./js/bundle/all.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5882869cd152497720f7","/* global Vue, firebase */\nconst db = firebase.database();\n\n// our <new-learn-form> component\n\nconst newLearnForm = Vue.component('new-learn-form', {\n  data: function() {\n    return {\n      cleanNewLearnText: this.newLearnText.trim(),\n      updatedStatus: this.status\n    };\n  },\n  methods: {\n    randomLearn: function() {\n      let learns = ['Pythagoras\\' theorem', 'how to find a manta ray', 'the Portuguese word for \\'jump\\'', 'an algorithm for sorting bubbles'];\n      let randomIndex = Math.floor(Math.random() * learns.length);\n\n      return learns[randomIndex];\n    },\n    saveNewLearn: function() {\n      let component = this;\n      component.updatedStatus = 'Saving...';\n      \n      db.ref(`users/${component.userUid}/learns`).push({\n        createdAt: Math.floor(Date.now()/1000),\n        learnText: this.cleanNewLearnText,\n        updatedAt: Math.floor(Date.now()/1000)\n      }, function(error) {\n        if (error) {\n          component.updatedStatus = error;\n        } else {\n          component.cleanNewLearnText = '';\n          component.placeholder = component.randomLearn();\n          component.updatedStatus = 'Type your new learning for today in the field above, and click \"Save\".';\n        }\n      });\n    }\n  },\n  props: ['newLearnText', 'status', 'userUid'],\n  template: `\n    <form class=\"new-learn-form\" @submit.prevent=\"saveNewLearn\">\n      <input type=\"text\" :placeholder=\"randomLearn()\" autoFocus required v-model=\"cleanNewLearnText\">\n      <p>{{ updatedStatus }}</p>\n      <input type=\"submit\" value=\"Save\">\n    </form>\n  `\n});\n\nexport default newLearnForm;\n\n\n// WEBPACK FOOTER //\n// ./js/components/new-learn-form.js","export default {\n  apiKey: \"AIzaSyCAZmqm5ADWiJaS3RVrnyc9a9_6eJREwwg\",\n  authDomain: \"today-i-learned-5e095.firebaseapp.com\",\n  databaseURL: \"https://today-i-learned-5e095.firebaseio.com\",\n  projectId: \"today-i-learned-5e095\",\n  storageBucket: \"today-i-learned-5e095.appspot.com\",\n  messagingSenderId: \"691472609212\"\n};\n\n\n// WEBPACK FOOTER //\n// ./js/firebase-config.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/style.scss\n// module id = 2\n// module chunks = 0","/* global Vue, firebase */\n\n// instruct webpack to do Sass compilation\nrequire('../sass/style.scss');\n\n// initialise Firebase\nimport config from './firebase-config.js';\nfirebase.initializeApp(config);\n\n// configure Firebase to use our chosen auth provider\nlet provider = new firebase.auth.TwitterAuthProvider();\n\n// set a base database reference\nconst db = firebase.database();\n\n// bring in our custom Vue component\nrequire('../js/components/new-learn-form.js');\n\n// initialise our Vue app with its initial state\nconst App = new Vue({\n  beforeCreate: function() {\n    // the app should watch the user's auth state\n    firebase.auth().onAuthStateChanged(function(user) {\n      console.log('user status changed:', user);\n      \n      if (user) {\n        // let our app know that we've got an authenticated user\n        this.user = user;\n        // set 2-way binding of the user's 'learns' list\n        this.$bindAsArray('learnsList', db.ref(`users/${user.uid}/learns`));\n      } else {\n        // no authed user - clear any previous user value\n        this.user = {};\n      }\n      \n      // hide the loading cover\n      document.querySelector('.loading-cover').classList.add('hide');\n    }.bind(this));\n  },\n  \n  el: '#app',\n  \n  data: {\n    learnsList: [],\n    newLearnText: '',\n    status: 'Type your new learning for today in the field above, and click \"Save\".',\n    user: {},\n  },\n  \n  methods: {\n    removeLearn: function(learn, event) {\n      this.$firebaseRefs.learnsList.child(learn['.key']).remove();\n      event.preventDefault();\n    },\n    \n    signIn: function(event) {\n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // on successful auth, we get the signed-in user's info\n        firebase.database().ref(`users/${result.user.uid}`).update({\n          displayName: result.user.displayName,\n          uid: result.user.uid\n        });\n      }).catch(function(error) {\n        // handle authentication errors\n        let errorMessage = error.message;\n        console.log('errorMessage:', errorMessage);\n      });\n      event.preventDefault();\n    },\n    \n    signOut: function(event) {\n      let component = this;\n      firebase.auth().signOut().then(function() {\n        component.user = {};\n      }).catch(function(error) {\n        console.log('signout error:', error);\n      });\n      event.preventDefault();\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./js/index.js"],"sourceRoot":""}